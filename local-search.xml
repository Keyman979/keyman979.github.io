<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title></title>
    <link href="/2022/08/22/%E6%B3%A8%E8%A7%A3sql/"/>
    <url>/2022/08/22/%E6%B3%A8%E8%A7%A3sql/</url>
    
    <content type="html"><![CDATA[<h1 id="注解sql"><a href="#注解sql" class="headerlink" title="注解sql"></a>注解sql</h1><hr><p>BrandDao接口配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">public interface BrandDao &#123;</span><br><span class="line"></span><br><span class="line">    /*</span><br><span class="line">    注意：映射文件的引入最好使用包批量扫描引入</span><br><span class="line">&lt;mappers&gt;</span><br><span class="line">&lt;!--方式二：扫描接口-批量引入--&gt;</span><br><span class="line">&lt;package name=&quot;com.itheima.dao&quot;/&gt;</span><br><span class="line">&lt;/mappers&gt;</span><br><span class="line">    增加：@Insert(&quot;增加SQL&quot;)</span><br><span class="line">删除：@Delete(&quot;删除SQL&quot;)</span><br><span class="line">修改：@Update(&quot;修改SQL&quot;)</span><br><span class="line">查询：@Select(&quot;查询SQL&quot;)</span><br><span class="line">增加记录 返回主键：@SelectKey(resultType=&quot;&quot;,keyProperty=&quot;&quot;,before=true|false,statement=&#123;&quot;select last_insert_id()&quot;&#125;);</span><br><span class="line"></span><br><span class="line">实际开发中：MyBatis基本上不使用注解开发，除非一些小公司</span><br><span class="line">原因：</span><br><span class="line">1.简单操作使用注解，复杂操作要使用xml配置</span><br><span class="line">2.使用注解存在硬编码问题</span><br><span class="line">3.后面我们会学习MyBatis-plus  可以进行代码自动生成</span><br><span class="line">会生成 javabean、dao接口、dao接口映射文件、service接口、service实现类</span><br><span class="line">复杂关系实现注解说明：</span><br><span class="line">@ResultMap：用于根据resultMap标签的id引用配置好的resultMap</span><br><span class="line">    */</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 查询所有品牌信息</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    @ResultMap(&quot;brandMap&quot;)</span><br><span class="line">    @Select(&quot;select * from tb_brand&quot;)</span><br><span class="line">    List&lt;Brand&gt; selectAll();</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 查看品牌详情</span><br><span class="line">     * @param id 品牌id</span><br><span class="line">     * @return 品牌对象</span><br><span class="line">     */</span><br><span class="line">    @ResultMap(&quot;brandMap&quot;)</span><br><span class="line">    @Select(&quot;select * from tb_brand where id=#&#123;id&#125;&quot;)</span><br><span class="line">    Brand selectById(int id);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 添加品牌</span><br><span class="line">     * @param brand 封装要添加的品牌信息</span><br><span class="line">     * @return 受影响的行数</span><br><span class="line">     */</span><br><span class="line">    @Insert(&quot;insert into tb_brand values(null,#&#123;brandName&#125;,#&#123;companyName&#125;,#&#123;ordered&#125;,#&#123;description&#125;,#&#123;status&#125;)\n&quot;)</span><br><span class="line">    int add(Brand brand);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 添加品牌 获取添加记录的主键</span><br><span class="line">     * @param brand 封装要添加的品牌信息</span><br><span class="line">     * @return 受影响的行数</span><br><span class="line">     */</span><br><span class="line">    /*</span><br><span class="line">         @SelectKey：获取插入数据的主键</span><br><span class="line">            keyProperty：主键列对应的属性</span><br><span class="line">            resultType：主键列对应的属性类型</span><br><span class="line">            before：主键的生成在插入语句之前设置为ture，在插入语句之后生成主键设置为false</span><br><span class="line">            statement：获取主键的sql语句</span><br><span class="line">    */</span><br><span class="line">    @SelectKey(keyProperty = &quot;id&quot;,resultType = int.class,before = false,statement = &quot;select last_insert_id()&quot;)</span><br><span class="line">    @Insert(&quot;insert into tb_brand values(null,#&#123;brandName&#125;,#&#123;companyName&#125;,#&#123;ordered&#125;,#&#123;description&#125;,#&#123;status&#125;)\n&quot;)</span><br><span class="line">    int addGetId(Brand brand);</span><br><span class="line">    </span><br><span class="line">    /**</span><br><span class="line">     * 修改品牌的全部信息</span><br><span class="line">     * @param brand 要修改的品牌信息</span><br><span class="line">     * @return 受影响的行数</span><br><span class="line">     */</span><br><span class="line">    @Update(&quot;update tb_brand set\n&quot; +</span><br><span class="line">            &quot;            brand_name=#&#123;brandName&#125;,\n&quot; +</span><br><span class="line">            &quot;            company_name=#&#123;companyName&#125;,\n&quot; +</span><br><span class="line">            &quot;            ordered=#&#123;ordered&#125;,\n&quot; +</span><br><span class="line">            &quot;            description=#&#123;description&#125;,\n&quot; +</span><br><span class="line">            &quot;            status=#&#123;status&#125;\n&quot; +</span><br><span class="line">            &quot;            where id=#&#123;id&#125;&quot;)</span><br><span class="line">    int update(Brand brand);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 根据id删除指定的品牌信息记录</span><br><span class="line">     * @param id 品牌的id</span><br><span class="line">     * @return 受影响的行数</span><br><span class="line">     */</span><br><span class="line">    @Delete(&quot;delete from tb_brand where id=#&#123;id&#125;&quot;)</span><br><span class="line">    int deleteById(int id);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2022/08/22/%E6%99%AE%E9%80%9Asql/"/>
    <url>/2022/08/22/%E6%99%AE%E9%80%9Asql/</url>
    
    <content type="html"><![CDATA[<h1 id="普通sql"><a href="#普通sql" class="headerlink" title="普通sql"></a>普通sql</h1><hr><p>BrandDao</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">public interface BrandDao &#123;</span><br><span class="line">    /**</span><br><span class="line">     * 查询所有品牌信息</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    List&lt;Brand&gt; SelectAll();</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 查看品牌详情</span><br><span class="line">     * @param id 品牌id</span><br><span class="line">     * @return 品牌对象</span><br><span class="line">     */</span><br><span class="line">    Brand selectById(int id);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 添加品牌</span><br><span class="line">     * @param brand 封装要添加的品牌信息</span><br><span class="line">     * @return 受影响的行数</span><br><span class="line">     */</span><br><span class="line">    int add(Brand brand);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 添加品牌数据到数据库 添加完成之后获取到品牌的id</span><br><span class="line">     * @param brand 封装要添加的品牌信息</span><br><span class="line">     * @return 受影响的行数</span><br><span class="line">     */</span><br><span class="line">    int addGetId(Brand brand);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 添加品牌数据到数据库 添加完成之后获取到品牌的id</span><br><span class="line">     * @param brand 封装要添加的品牌信息</span><br><span class="line">     * @return 受影响的行数</span><br><span class="line">     */</span><br><span class="line">    int addGetId2(Brand brand);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 修改品牌的全部信息</span><br><span class="line">     * @param brand 要修改的品牌信息</span><br><span class="line">     * @return 受影响的行数</span><br><span class="line">     */</span><br><span class="line">    int update(Brand brand);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 根据id删除指定的品牌信息记录</span><br><span class="line">     * @param id 品牌的id</span><br><span class="line">     * @return 受影响的行数</span><br><span class="line">     */</span><br><span class="line">    int deleteById(int id);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 根据品牌名称模糊查询品牌列表</span><br><span class="line">     * @param brandName 品牌名称</span><br><span class="line">     * @return 品牌信息列表集合</span><br><span class="line">     */</span><br><span class="line">    List&lt;Brand&gt; selectByConditional1(String brandName);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 根据品牌名称模糊查询品牌列表</span><br><span class="line">     * @param brandName 品牌名称</span><br><span class="line">     * @return 品牌信息列表集合</span><br><span class="line">     */</span><br><span class="line">    List&lt;Brand&gt; selectByConditional2(String brandName);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 多条件查询</span><br><span class="line">     * @param status 当前状态</span><br><span class="line">     * @param brandName 品牌名称</span><br><span class="line">     * @param companyName 企业名称</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    List&lt;Brand&gt; selectByCondition3(@Param(&quot;status&quot;) int status, @Param(&quot;brandName&quot;) String brandName, @Param(&quot;companyName&quot;) String companyName);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 多条件查询</span><br><span class="line">     * @param brand 封装查询条件</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    List&lt;Brand&gt; selectByCondition4(Brand brand);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 多条件查询</span><br><span class="line">     * @param map 封装查询条件</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    List&lt;Brand&gt; selectByCondition5(Map&lt;String,Object&gt; map);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 需求：要求根据品牌的状态status查询所有的品牌信息 根据ordered字段进行排序</span><br><span class="line">     */</span><br><span class="line">    List&lt;Brand&gt; selectByCondition6(QueryVo queryVo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>BrandDao.xml配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br></pre></td><td class="code"><pre><span class="line">&lt;mapper namespace=&quot;com.itz.dao.BrandDao&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 1.查询所有品牌信息   --&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">        存在问题：品牌信息查询出来封装到Brand对象中显示时，品牌名称brandName和企业名称companyName两个属性数据显示为null</span><br><span class="line">        原因：</span><br><span class="line">            MyBatis可以自动的将数据库表中字段数据封装到对象属性中，但是这个时候要求表中字段和对象属性名称要一致</span><br><span class="line">            这里：tb_brand表中品牌名称字段为brand_name、企业名称字段为company_name 和Brand类品牌名称属性brandName、企业名称companyName对不上</span><br><span class="line">            就导致了无法将数据库中查询出的品牌名称数据和企业名称数据填充到Brand对象的品牌名称属性brandName、企业名称属性companyName上面 所以出现为null</span><br><span class="line">        解决：</span><br><span class="line">            方式一：</span><br><span class="line">            1.手动配置表中字段和类中属性的映射，使用ResultMap标签</span><br><span class="line">                resultMap标签：用于手动配置表中和类中属性映射。解决由于字段名和属性名不一致导致无法自动填充的问题。</span><br><span class="line">              使用：</span><br><span class="line">                  1.编写一个resultMap标签</span><br><span class="line">                  2.在resultMap标签中使用子标签id或result进行配置列名和属性的映射</span><br><span class="line">                  3.在select标签中根据resultMap标签id引用我们自定义的resultMap标签</span><br><span class="line">              resultMap标签：</span><br><span class="line">                id属性：唯一标识 名称可以随便起</span><br><span class="line">                type属性：你这里要配置的是数据库哪张表和哪个Java类的字段属性映射 这里写java类的类型</span><br><span class="line">                id子标签：用于配置主键列名和属性名的映射</span><br><span class="line">                    column属性：数据库表中列名</span><br><span class="line">                    property属性：java类属性名</span><br><span class="line">                result标签：用于配置普通列名和属性名的映射</span><br><span class="line">                    column属性：数据库表中列名</span><br><span class="line">                    property属性：java类属性名</span><br><span class="line">         注意：在select标签中 resultType和resultMap的使用只能二选一，不要同时存在</span><br><span class="line"></span><br><span class="line">       方式二：使用别名 直接对你的查询字段[列]起一个别名和属性名称相同即可</span><br><span class="line"></span><br><span class="line">       方式二对于后期的复杂的多表查询 用起来不是很合适</span><br><span class="line">       实际开发中，使用方式一会更多些  当然对于你想使用哪一种随你</span><br><span class="line">    --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 方式二： --&gt;</span><br><span class="line">    &lt;!--&lt;select id=&quot;SelectAll&quot; resultType=&quot;Brand&quot;&gt;</span><br><span class="line">        select id,brand_name AS brandName,company_name AS companyName,ordered,description,status from tb_brand</span><br><span class="line">    &lt;/select&gt;--&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 方式一：使用resultMap 解决列名和java类属性不一致 数据无法自动填充问题--&gt;</span><br><span class="line">    &lt;resultMap id=&quot;brandMap&quot; type=&quot;Brand&quot;&gt;</span><br><span class="line">        &lt;result column=&quot;brand_name&quot; property=&quot;brandName&quot; /&gt;</span><br><span class="line">        &lt;result column=&quot;company_name&quot; property=&quot;companyName&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/resultMap&gt;</span><br><span class="line"></span><br><span class="line">    &lt;select id=&quot;SelectAll&quot; resultMap=&quot;brandMap&quot;&gt;</span><br><span class="line">        select * from tb_brand</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--查看详情信息--&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">        select标签：查询</span><br><span class="line">            id属性：接口方法名称</span><br><span class="line">            resultType：接口方法返回值类型</span><br><span class="line">                情况1：方法返回泛型集合 就写集合的泛型类型</span><br><span class="line">                情况2：方法返回对象    就直接写对象的类型</span><br><span class="line"></span><br><span class="line">                注意：如果是查询，则resultType属性不能省略，当然你写了resultMap属性之后，可以不用写resultType属性</span><br><span class="line">            parameterType：接口方法形参类型</span><br><span class="line">                情况1：如果传入的是简单类型（基本类型+String）类型   parameterType属性值就直接写int、long、String</span><br><span class="line">                        获取参数值：#&#123;任意字段名称&#125;     一般我们会写和方法形参名称保持一致</span><br><span class="line"></span><br><span class="line">                注意：参数类型parameterType属性可以省略，不进行设置【MyBatis会自动识别参数类型 进行参数绑定】，一般如果我们明确知道类型，也不进行省略</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;select id=&quot;selectById&quot; resultMap=&quot;brandMap&quot; parameterType=&quot;int&quot;&gt;</span><br><span class="line">        select * from tb_brand where id = #&#123;id&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--添加品牌--&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">        insert标签：添加</span><br><span class="line">            id属性：接口方法名</span><br><span class="line">            resultType属性：在增删改中 返回的是受影响行数 int类型  不需要设置 resultType属性省略不设置</span><br><span class="line">            parameterType属性：接口方法参数类型</span><br><span class="line">                情况2：如果传入的是一个对象参数    则直接写对象的类型即可</span><br><span class="line">                    获取参数：#&#123;对象属性名称&#125;</span><br><span class="line"></span><br><span class="line">            注意：</span><br><span class="line">                1.增删改操作：对应的insert、update、delete标签不需要设置resultType属性  默认返回受影响的行数 int类型</span><br><span class="line">                2.增删改操作：MyBatis采用JDBC事务管理   默认关闭了事务的自动提交 需要手动提交事务</span><br><span class="line">                3.增删改操作：不要使用错标签 增加用insert标签 删除就用delete标签 修改就用update标签</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;insert id=&quot;add&quot;&gt;</span><br><span class="line">        insert into tb_brand values(null, #&#123;brandName&#125;, #&#123;companyName&#125;, #&#123;ordered&#125;, #&#123;description&#125;, #&#123;status&#125;)</span><br><span class="line">    &lt;/insert&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--添加品牌数据到数据库 添加完成之后获取到品牌的id--&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">        主键返回方式一：</span><br><span class="line">            在insert标签上设置 useGeneratedKeys属性和keyProperty属性</span><br><span class="line">            useGeneratedKeys属性：使用MySQL数据库主键自增</span><br><span class="line">            keyProperty属性：通过数据库主键自增生成的id    填充到对应的那个属性上</span><br><span class="line">            注意：只有数据库采用的是主键自增 才可以这样使用</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;insert id=&quot;addGetId&quot; parameterType=&quot;brand&quot; useGeneratedKeys=&quot;true&quot; keyProperty=&quot;id&quot;&gt;</span><br><span class="line">        insert into tb_brand values(null, #&#123;brandName&#125;, #&#123;companyName&#125;, #&#123;ordered&#125;, #&#123;description&#125;, #&#123;status&#125;)</span><br><span class="line">    &lt;/insert&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--</span><br><span class="line">        添加-主键返回方式二：</span><br><span class="line">            selectKey标签： 查询添加到数据库中的记录的主键数据</span><br><span class="line">                keyProperty属性：主键列查询出来填充到对象的哪个属性上    主键列对应的属性名称</span><br><span class="line">                resultType属性：主键列对应的属性类型</span><br><span class="line">                order属性：主键的生成和插入SQL语句的顺序</span><br><span class="line">                    eg：情况1：id自增 先插入数据 然后生成主键  所以这样就设置为AFTER</span><br><span class="line">                        情况2：比如使用uuid作为主键  这时uuid就需要提前生成 然后再和数据一起插入到数据库表中  这样就设置为BEFORE</span><br><span class="line">            selectKey标签体：写查询主键的SQL语句</span><br><span class="line">                  自增：select last_insert_id()    ：查询上一次插入记录自增的id</span><br><span class="line">                  uuid：select uuid()             ：查询当前插入这条记录的UUID</span><br><span class="line"></span><br><span class="line">       实际开发：</span><br><span class="line">              一流项目：使用雪花算法</span><br><span class="line">              二流项目：使用uuid</span><br><span class="line">              三流项目：使用主键自增</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;insert id=&quot;addGetId2&quot; parameterType=&quot;brand&quot;&gt;</span><br><span class="line">        &lt;selectKey keyProperty=&quot;id&quot; resultType=&quot;int&quot; order=&quot;AFTER&quot;&gt;</span><br><span class="line">            select last_insert_id()</span><br><span class="line">        &lt;/selectKey&gt;</span><br><span class="line">        insert into tb_brand values(null, #&#123;brandName&#125;, #&#123;companyName&#125;, #&#123;ordered&#125;, #&#123;description&#125;, #&#123;status&#125;)</span><br><span class="line">    &lt;/insert&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--修改品牌记录的所有字段--&gt;</span><br><span class="line">    &lt;update id=&quot;update&quot; parameterType=&quot;brand&quot;&gt;</span><br><span class="line">        update tb_brand set</span><br><span class="line">            brand_name=#&#123;brandName&#125;,</span><br><span class="line">            company_name=#&#123;companyName&#125;,</span><br><span class="line">            ordered=#&#123;ordered&#125;,</span><br><span class="line">            description=#&#123;description&#125;,</span><br><span class="line">            status=#&#123;status&#125;</span><br><span class="line">            where id=#&#123;id&#125;</span><br><span class="line">    &lt;/update&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--根据id删除单个品牌信息记录--&gt;</span><br><span class="line">    &lt;delete id=&quot;deleteById&quot; parameterType=&quot;int&quot;&gt;</span><br><span class="line">        delete from tb_brand where id=#&#123;id&#125;</span><br><span class="line">    &lt;/delete&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--根据品牌名称模糊查询品牌列表--&gt;</span><br><span class="line">    &lt;select id=&quot;selectByConditional1&quot; resultMap=&quot;brandMap&quot; parameterType=&quot;string&quot;&gt;</span><br><span class="line">        &lt;!--select * from tb_brand where brand_name like &#x27;%#&#123;brandName&#125;%&#x27;--&gt;</span><br><span class="line">        select * from tb_brand where brand_name like &#x27;%$&#123;value&#125;%&#x27;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--根据品牌名称模糊查询品牌列表--&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">        MyBatis中获取参数的方式有两种：</span><br><span class="line">            $&#123;&#125;:表示拼接字符串 不会进行数据类型转换  容易产生SQL注意问题</span><br><span class="line">            #&#123;&#125;:表示占位符？  会进行数据类型自动转换 不会产生SQL注入问题</span><br><span class="line">            注意：</span><br><span class="line">                使用$&#123;&#125;获取单个简单类型参数：必须写$&#123;value&#125;     获取对象类型参数：$&#123;对象属性名称&#125;</span><br><span class="line">                使用#&#123;&#125;获取单个简单类型参数：必须写#&#123;任意字段&#125;   获取对象类型参数：#&#123;对象属性名称&#125;</span><br><span class="line">            使用场景：</span><br><span class="line">                #&#123;&#125;: 一般正常的传递参数 都使用#&#123;&#125;</span><br><span class="line">                $&#123;&#125;: 一般传递表名、列名、排序字段使用$&#123;&#125;</span><br><span class="line">                    因为传递表名tb_brand 使用$&#123;&#125;传递SQL语句中就直接显示 tb_brand；如果使用#&#123;&#125;传递 则会这样显示&#x27;tb_brand&#x27;</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;select id=&quot;selectByConditional2&quot; resultMap=&quot;brandMap&quot; parameterType=&quot;string&quot;&gt;</span><br><span class="line">        &lt;!--select * from tb_brand where brand_name like &#x27;%#&#123;brandName&#125;%&#x27;--&gt;</span><br><span class="line">        &lt;!--concat(&#x27;%&#x27;,#&#123;brandName&#125;,&#x27;%&#x27;):MySQl内置的字符串拼接函数  用于将多个字符串拼接成一个新的字符串  ==》&#x27;%?%&#x27; ==&gt; &#x27;%百度%&#x27; --&gt;</span><br><span class="line">        select * from tb_brand where brand_name like concat(&#x27;%&#x27;,#&#123;brandName&#125;,&#x27;%&#x27;)</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--多条件查询品牌信息列表--&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">        问题：多个参数不能直接传递，如果直接传递会报错</span><br><span class="line">        解决：</span><br><span class="line">            方式一：直接在dao接口方法形参前打上@Param(&quot;参数名称&quot;)注解  获取时#&#123;参数名称&#125;  #&#123;&#125;中的参数名称要和@Param注解中参数名称保持一致  【最简单】</span><br><span class="line"></span><br><span class="line">            方式二：将多个参数封装到对象中 获取：#&#123;对象属性名称&#125;</span><br><span class="line"></span><br><span class="line">            方式三：将多个参数封装到一个map集合中    获取：#&#123;map的key&#125;</span><br><span class="line"></span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;!--多参数传递方式一：使用@Param注解--&gt;</span><br><span class="line">    &lt;select id=&quot;selectByCondition3&quot; resultMap=&quot;brandMap&quot;&gt;</span><br><span class="line">        select * from tb_brand</span><br><span class="line">            where status = #&#123;status&#125;</span><br><span class="line">            and brand_name like concat(&#x27;%&#x27;, #&#123;brandName&#125;, &#x27;%&#x27;)</span><br><span class="line">            and company_name like concat(&#x27;%&#x27;, #&#123;companyName&#125;, &#x27;%&#x27;)</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--多参数传递方式二：使用对象封装多个参数--&gt;</span><br><span class="line">    &lt;select id=&quot;selectByCondition4&quot; resultMap=&quot;brandMap&quot; parameterType=&quot;brand&quot;&gt;</span><br><span class="line">        select * from tb_brand</span><br><span class="line">          where status = #&#123;status&#125;</span><br><span class="line">          and brand_name like concat(&#x27;%&#x27;, #&#123;brandName&#125;, &#x27;%&#x27;)</span><br><span class="line">          and company_name like concat(&#x27;%&#x27;, #&#123;companyName&#125;, &#x27;%&#x27;)</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--多参数传递方式二：使用map集合封装多个参数--&gt;</span><br><span class="line">    &lt;select id=&quot;selectByCondition5&quot; resultMap=&quot;brandMap&quot;&gt;</span><br><span class="line">        select * from tb_brand</span><br><span class="line">          where status = #&#123;status&#125;</span><br><span class="line">          and brand_name like concat(&#x27;%&#x27;, #&#123;brandName&#125;, &#x27;%&#x27;)</span><br><span class="line">          and company_name like concat(&#x27;%&#x27;, #&#123;companyName&#125;, &#x27;%&#x27;)</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--使用包装类QueryVo封装所有的参数--&gt;</span><br><span class="line">    &lt;select id=&quot;selectByCondition6&quot; resultMap=&quot;brandMap&quot; parameterType=&quot;queryVo&quot;&gt;</span><br><span class="line">        select *</span><br><span class="line">        from tb_brand</span><br><span class="line">        where status = #&#123;brand.status&#125;</span><br><span class="line">        order by $&#123;orderField&#125; desc</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2022/08/22/%E5%8A%A8%E6%80%81sql/"/>
    <url>/2022/08/22/%E5%8A%A8%E6%80%81sql/</url>
    
    <content type="html"><![CDATA[<h1 id="动态sql"><a href="#动态sql" class="headerlink" title="动态sql"></a>动态sql</h1><hr><p>BrandMapper接口</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">public interface BrandDao &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 多条件查询 if</span><br><span class="line">     * @param brand 封装查询条件</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    List&lt;Brand&gt;  selectByCondition(Brand brand);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 多条件查询 if + where 1=1</span><br><span class="line">     * @param brand 封装查询条件</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    List&lt;Brand&gt;  selectByCondition1(Brand brand);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 多条件查询 if + where</span><br><span class="line">     * @param brand 封装查询条件</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    List&lt;Brand&gt;  selectByCondition2(Brand brand);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 多条件中选一个条件查询 choose + where</span><br><span class="line">     * @param brand 封装查询条件</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    List&lt;Brand&gt;  selectByCondition3(Brand brand);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 多条件查询 if + trim</span><br><span class="line">     * @param brand 封装查询条件</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    List&lt;Brand&gt;  selectByCondition4(Brand brand);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 动态修改品牌的信息 set+if</span><br><span class="line">     * @param brand 要修改的品牌信息</span><br><span class="line">     * @return 受影响的行数</span><br><span class="line">     */</span><br><span class="line">    int update(Brand brand);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 动态修改品牌的信息 trim+if</span><br><span class="line">     * @param brand 要修改的品牌信息</span><br><span class="line">     * @return 受影响的行数</span><br><span class="line">     */</span><br><span class="line">    int update2(Brand brand);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 批量删除</span><br><span class="line">     * @param ids 要删除的id数组</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    int deleteByIds(@Param(&quot;ids&quot;) int[] ids);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>BrandMapper.xml配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br></pre></td><td class="code"><pre><span class="line"> &lt;mapper namespace=&quot;com.itz.dao.BrandDao&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--动态SQL标签sql</span><br><span class="line">        sql标签：用于抽取公共的sql片段 方便集中进行维护</span><br><span class="line">        include标签：用于在其他SQL语句中引入定义好的SQL片段</span><br><span class="line">            refId属性：执行sql标签的id属性值</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;sql id=&quot;selectBrand&quot;&gt;</span><br><span class="line">        &lt;!--select * from tb_brand--&gt;</span><br><span class="line">        select id,brand_name,company_name from tb_brand</span><br><span class="line">    &lt;/sql&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 方式一：使用resultMap 解决列名和java类属性不一致 数据无法自动填充问题--&gt;</span><br><span class="line">    &lt;resultMap id=&quot;brandMap&quot; type=&quot;Brand&quot;&gt;</span><br><span class="line">        &lt;result column=&quot;brand_name&quot; property=&quot;brandName&quot; /&gt;</span><br><span class="line">        &lt;result column=&quot;company_name&quot; property=&quot;companyName&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/resultMap&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--多参数传递方式二：使用对象封装多个参数--&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">        select * from tb_brand</span><br><span class="line">          where status = #&#123;status&#125;</span><br><span class="line">          and brand_name like concat(&#x27;%&#x27;, #&#123;brandName&#125;, &#x27;%&#x27;)</span><br><span class="line">          and company_name like concat(&#x27;%&#x27;, #&#123;companyName&#125;, &#x27;%&#x27;)</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">        if标签：用于判断 test属性值如果为ture 就会将if标签体中的sql片段拼接到sql语句中</span><br><span class="line">        注意：test属性中  1.获取参数不需要甲#&#123;&#125; 2.并且或者使用 and和or</span><br><span class="line">        说明：brandName.length 获取这个字符串参数的长度 长度大于0。说明该字符串不是空符串&quot;&quot;</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;select id=&quot;selectByCondition&quot; resultMap=&quot;brandMap&quot; parameterType=&quot;brand&quot;&gt;</span><br><span class="line">        select * from tb_brand where</span><br><span class="line">            &lt;if test=&quot;status!=null&quot;&gt;</span><br><span class="line">                status = #&#123;status&#125;</span><br><span class="line">            &lt;/if&gt;</span><br><span class="line">            &lt;if test=&quot;brandName!=null and brandName.length&gt;0&quot;&gt;</span><br><span class="line">                and brand_name like concat(&#x27;%&#x27;, #&#123;brandName&#125;, &#x27;%&#x27;)</span><br><span class="line">            &lt;/if&gt;</span><br><span class="line">            &lt;if test=&quot;companyName!=null and companyName.length&gt;0&quot;&gt;</span><br><span class="line">                and company_name like concat(&#x27;%&#x27;, #&#123;companyName&#125;, &#x27;%&#x27;)</span><br><span class="line">            &lt;/if&gt;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--if + where 1=1--&gt;</span><br><span class="line">    &lt;select id=&quot;selectByCondition1&quot; resultMap=&quot;brandMap&quot; parameterType=&quot;brand&quot;&gt;</span><br><span class="line">        select * from tb_brand where 1=1</span><br><span class="line">        &lt;if test=&quot;status!=null&quot;&gt;</span><br><span class="line">            and status = #&#123;status&#125;</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line">        &lt;if test=&quot;brandName!=null and brandName.length&gt;0&quot;&gt;</span><br><span class="line">            and brand_name like concat(&#x27;%&#x27;, #&#123;brandName&#125;, &#x27;%&#x27;)</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line">        &lt;if test=&quot;companyName!=null and companyName.length&gt;0&quot;&gt;</span><br><span class="line">            and company_name like concat(&#x27;%&#x27;, #&#123;companyName&#125;, &#x27;%&#x27;)</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--if + where--&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">        where标签：用于设置where关键字 当where标签体中有条件成立 则会添加where关键字  没有 则不添加</span><br><span class="line">        注意：where会去除多余的关键字 eg：and｜or  但是不会自动添加</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;select id=&quot;selectByCondition2&quot; resultMap=&quot;brandMap&quot; parameterType=&quot;brand&quot;&gt;</span><br><span class="line">        select * from tb_brand</span><br><span class="line">            &lt;where&gt;</span><br><span class="line">                &lt;if test=&quot;status!=null&quot;&gt;</span><br><span class="line">                    and status = #&#123;status&#125;</span><br><span class="line">                &lt;/if&gt;</span><br><span class="line">                &lt;if test=&quot;brandName!=null and brandName.length&gt;0&quot;&gt;</span><br><span class="line">                    and brand_name like concat(&#x27;%&#x27;, #&#123;brandName&#125;, &#x27;%&#x27;)</span><br><span class="line">                &lt;/if&gt;</span><br><span class="line">                &lt;if test=&quot;companyName!=null and companyName.length&gt;0&quot;&gt;</span><br><span class="line">                    and company_name like concat(&#x27;%&#x27;, #&#123;companyName&#125;, &#x27;%&#x27;)</span><br><span class="line">                &lt;/if&gt;</span><br><span class="line">            &lt;/where&gt;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--choose + where--&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">        choose标签：类似于java中switch判断 多选一</span><br><span class="line">            when：相当于case</span><br><span class="line">            otherwise：相当于default</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;select id=&quot;selectByCondition3&quot; resultMap=&quot;brandMap&quot; parameterType=&quot;brand&quot;&gt;</span><br><span class="line">        &lt;include refid=&quot;selectBrand&quot;/&gt;</span><br><span class="line">        &lt;where&gt;</span><br><span class="line">            &lt;choose&gt;</span><br><span class="line">                &lt;when test=&quot;status!=null&quot;&gt;</span><br><span class="line">                    status = #&#123;status&#125;</span><br><span class="line">                &lt;/when&gt;</span><br><span class="line">                &lt;when test=&quot;brandName!=null and brandName.length&gt;0&quot;&gt;</span><br><span class="line">                    brand_name like concat(&#x27;%&#x27;, #&#123;brandName&#125;, &#x27;%&#x27;)</span><br><span class="line">                &lt;/when&gt;</span><br><span class="line">                &lt;when test=&quot;companyName!=null and companyName.length&gt;0&quot;&gt;</span><br><span class="line">                    company_name like concat(&#x27;%&#x27;, #&#123;companyName&#125;, &#x27;%&#x27;)</span><br><span class="line">                &lt;/when&gt;</span><br><span class="line">                &lt;otherwise&gt;</span><br><span class="line">                    1=1</span><br><span class="line">                &lt;/otherwise&gt;</span><br><span class="line">            &lt;/choose&gt;</span><br><span class="line">        &lt;/where&gt;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--if+trim--&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">        trim标签：是用于替换where、set标签完成sql语句拼接的</span><br><span class="line">            prefix：设置前缀</span><br><span class="line">            prefixOverrides：去除sql片段前面多余的关键字</span><br><span class="line">            suffixOverrides：去除sql片段后面多余的关键字</span><br><span class="line">            suffix：设置后缀</span><br><span class="line"></span><br><span class="line">            eg：select * from tb_brand where and status=1</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;select id=&quot;selectByCondition4&quot; resultMap=&quot;brandMap&quot; parameterType=&quot;brand&quot;&gt;</span><br><span class="line">        &lt;include refid=&quot;selectBrand&quot;/&gt;</span><br><span class="line">        &lt;trim prefix=&quot;where&quot; prefixOverrides=&quot;and|or&quot;&gt;</span><br><span class="line">            &lt;if test=&quot;status!=null&quot;&gt;</span><br><span class="line">                and status = #&#123;status&#125;</span><br><span class="line">            &lt;/if&gt;</span><br><span class="line">            &lt;if test=&quot;brandName!=null and brandName.length&gt;0&quot;&gt;</span><br><span class="line">                and brand_name like concat(&#x27;%&#x27;, #&#123;brandName&#125;, &#x27;%&#x27;)</span><br><span class="line">            &lt;/if&gt;</span><br><span class="line">            &lt;if test=&quot;companyName!=null and companyName.length&gt;0&quot;&gt;</span><br><span class="line">                and company_name like concat(&#x27;%&#x27;, #&#123;companyName&#125;, &#x27;%&#x27;)</span><br><span class="line">            &lt;/if&gt;</span><br><span class="line">        &lt;/trim&gt;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--动态修改品牌记录的字段信息--&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">        update tb_brand set</span><br><span class="line">            brand_name=#&#123;brandName&#125;,</span><br><span class="line">            company_name=#&#123;companyName&#125;,</span><br><span class="line">            ordered=#&#123;ordered&#125;,</span><br><span class="line">            description=#&#123;description&#125;,</span><br><span class="line">            status=#&#123;status&#125;</span><br><span class="line">        where id=#&#123;id&#125;</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;!--set+if</span><br><span class="line">        set标签：替换set关键字  会去除多余的,</span><br><span class="line"></span><br><span class="line">        eg:update tb_brand set brand_name=?,company_name=?,where id=?</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;update id=&quot;update&quot; parameterType=&quot;brand&quot;&gt;</span><br><span class="line">        update tb_brand</span><br><span class="line"></span><br><span class="line">            &lt;set&gt;</span><br><span class="line">                &lt;if test=&quot;brandName!=null and brandName.length&gt;0&quot;&gt;</span><br><span class="line">                    brand_name=#&#123;brandName&#125;,</span><br><span class="line">                &lt;/if&gt;</span><br><span class="line">                &lt;if test=&quot;companyName!=null and companyName.length&gt;0&quot;&gt;</span><br><span class="line">                    company_name=#&#123;companyName&#125;,</span><br><span class="line">                &lt;/if&gt;</span><br><span class="line">                &lt;if test=&quot;ordered!=null&quot;&gt;</span><br><span class="line">                    ordered=#&#123;ordered&#125;</span><br><span class="line">                &lt;/if&gt;</span><br><span class="line">                &lt;if test=&quot;description!=null and description.length&gt;0&quot;&gt;</span><br><span class="line">                    description=#&#123;description&#125;,</span><br><span class="line">                &lt;/if&gt;</span><br><span class="line">                &lt;if test=&quot;status!=null&quot;&gt;</span><br><span class="line">                    status=#&#123;status&#125;</span><br><span class="line">                &lt;/if&gt;</span><br><span class="line">            &lt;/set&gt;</span><br><span class="line">            where id=#&#123;id&#125;</span><br><span class="line">    &lt;/update&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--trim+if--&gt;</span><br><span class="line">    &lt;update id=&quot;update2&quot; parameterType=&quot;brand&quot;&gt;</span><br><span class="line">        update tb_brand</span><br><span class="line">        &lt;trim prefix=&quot;set&quot; suffixOverrides=&quot;,&quot; suffix=&quot;where id=#&#123;id&#125;&quot;&gt;</span><br><span class="line">            &lt;if test=&quot;brandName!=null and brandName.length&gt;0&quot;&gt;</span><br><span class="line">                brand_name=#&#123;brandName&#125;,</span><br><span class="line">            &lt;/if&gt;</span><br><span class="line">            &lt;if test=&quot;companyName!=null and companyName.length&gt;0&quot;&gt;</span><br><span class="line">                company_name=#&#123;companyName&#125;,</span><br><span class="line">            &lt;/if&gt;</span><br><span class="line">            &lt;if test=&quot;ordered!=null&quot;&gt;</span><br><span class="line">                ordered=#&#123;ordered&#125;,</span><br><span class="line">            &lt;/if&gt;</span><br><span class="line">            &lt;if test=&quot;description!=null and description.length&gt;0&quot;&gt;</span><br><span class="line">                description=#&#123;description&#125;,</span><br><span class="line">            &lt;/if&gt;</span><br><span class="line">            &lt;if test=&quot;status!=null&quot;&gt;</span><br><span class="line">                status=#&#123;status&#125;</span><br><span class="line">            &lt;/if&gt;</span><br><span class="line">        &lt;/trim&gt;</span><br><span class="line">    &lt;/update&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--批量删除  delete from tb_brand where id in(6,7,8)--&gt;</span><br><span class="line">    &lt;!--foreach</span><br><span class="line">            foreach：遍历集合或数组参数 完成sql片段拼接 最终实现效果：(6,7,8)</span><br><span class="line">                collection属性：表示你要遍历的集合或数组</span><br><span class="line">                item属性：集合中的元素 迭代变量</span><br><span class="line">                open属性：表示sql片段开头</span><br><span class="line">                close属性：表示sql片段结尾</span><br><span class="line">                separator属性：表示元素与元素之间的分隔符</span><br><span class="line">            注意：foreach标签用于遍历list集合或数组参数，一般和in关键字一起使用。</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;delete id=&quot;deleteByIds&quot;&gt;</span><br><span class="line">        delete from tb_brand where id in</span><br><span class="line">        &lt;foreach collection=&quot;ids&quot; item=&quot;id&quot; open=&quot;(&quot; separator=&quot;,&quot; close=&quot;)&quot;&gt;</span><br><span class="line">            #&#123;id&#125;</span><br><span class="line">        &lt;/foreach&gt;</span><br><span class="line">    &lt;/delete&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2022/08/22/MyBatis%E7%AC%94%E8%AE%B0/"/>
    <url>/2022/08/22/MyBatis%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h1><hr><h2 id="1-环境搭建步骤"><a href="#1-环境搭建步骤" class="headerlink" title="1.环境搭建步骤"></a>1.环境搭建步骤</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.新建模块</span><br><span class="line">2.导入jar包</span><br><span class="line">3.编写User类</span><br><span class="line">4.复制mybatis-config.xml到resources</span><br><span class="line">5.修改连接池信息</span><br><span class="line">6.编写接口</span><br><span class="line">7.复制UserMapper.xml到resources</span><br><span class="line">8.编写测试类</span><br></pre></td></tr></table></figure><blockquote><p>测试类<br>    <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">   public void test01() throws IOException &#123;</span><br><span class="line"></span><br><span class="line">       String resource = &quot;mybatis-config.xml&quot;;</span><br><span class="line">       // 加载 mybatis-config.xml 文件, 变成流</span><br><span class="line">       InputStream inputStream = Resources.getResourceAsStream(resource);</span><br><span class="line">       // build(inputStream): 解析 mybatis-config.xml 和 UserMapper.xml 文件</span><br><span class="line"></span><br><span class="line">       // SqlSessionFactory: 相当于数据库连接池</span><br><span class="line">       SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line"></span><br><span class="line">       // openSession(): 打开会话,理解为获取数据库连接,  SqlSession: 相当于数据库连接</span><br><span class="line">       SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line"></span><br><span class="line">       // getMapper(UserMapper.class): 内部会使用动态代理生成接口的实现类 (代理对象)</span><br><span class="line">       UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">       / 调用接口中的方法,执行对应的SQL语句, 把查询的结果变成User对象</span><br><span class="line">       List&lt;User&gt; userList = mapper.findAllUsers();</span><br><span class="line"></span><br><span class="line">       // 遍历集合</span><br><span class="line">       userList.forEach(System.out::println);</span><br><span class="line"></span><br><span class="line">       // 关闭会话, 相当于关闭数据库连接</span><br><span class="line">       sqlSession.close();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p></blockquote>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2022/08/20/hello-world/"/>
    <url>/2022/08/20/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2022/08/20/arm_linux%E5%AE%89%E8%A3%85mysql8.0/"/>
    <url>/2022/08/20/arm_linux%E5%AE%89%E8%A3%85mysql8.0/</url>
    
    <content type="html"><![CDATA[<h1 id="ARM-Linux-安装-mysql-8-0"><a href="#ARM-Linux-安装-mysql-8-0" class="headerlink" title="ARM Linux 安装 mysql-8.0"></a>ARM Linux 安装 mysql-8.0</h1><hr><h2 id="1-maysql下载地址"><a href="#1-maysql下载地址" class="headerlink" title="1.maysql下载地址"></a>1.maysql下载地址</h2><p> <a href="https://mirrors.tuna.tsinghua.edu.cn/mysql/downloads/MySQL-8.0/mysql-8.0.27-1.el7.aarch64.rpm-bundle.tar">https://mirrors.tuna.tsinghua.edu.cn/mysql/downloads/MySQL-8.0/mysql-8.0.27-1.el7.aarch64.rpm-bundle.tar</a></p><hr><h2 id="2-安装步骤"><a href="#2-安装步骤" class="headerlink" title="2.安装步骤"></a>2.安装步骤</h2><p>1.解压tar<br>把安装包放在&#x2F;opt&#x2F;rmp目录下</p><p>3.依次安装mysql依赖包以及mysql</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh mysql-community-common-8.0.27-1.el7.aarch64</span><br><span class="line">rpm -ivh mysql-community-client-plugins-8.0.27-1.el7.aarch64</span><br><span class="line">rpm -ivh mysql-community-libs-8.0.27-1.el7.aarch64</span><br><span class="line">rpm -ivh mysql-community-libs-compat-8.0.27-1.el7.aarch64</span><br><span class="line">rpm -ivh mysql-community-devel-8.0.27-1.el7.aarch64</span><br><span class="line">rpm -ivh mysql-community-client-8.0.27-1.el7.aarch64</span><br><span class="line">rmp -ivh mysql-community-server-8.0.27-1.el7.aarch64</span><br></pre></td></tr></table></figure><p>————————————————<br>版权声明：本文为CSDN博主「辉之不去的晓」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a href="https://blog.csdn.net/shixiao1144/article/details/121692873">https://blog.csdn.net/shixiao1144/article/details/121692873</a><br>安装所有的rpm文件，强制安装，不检测依赖</p><p>参数说明：<br>&#96; &#96;&#96;  - i install 安装<br>   -v  view  显示安装过程<br>   -h  显示安装的进度条<br>   -forece  强制安装<br>   -nodeps  不检查依赖<br>   U 存在相同的软件或冲突的软件直接覆盖&#96;&#96;&#96;</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; cd rpm   进入rpm目录</span><br><span class="line">&gt; rpm -ivhU * --force --nodeps</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>4.检查安装好的mysql包<br><code>rpm -qa |grep mysql</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># -q 查询</span><br><span class="line"># -a 所有软件</span><br><span class="line"># 合在一起代表查询所有已安装的软件</span><br></pre></td></tr></table></figure><hr><h2 id="3-启动MySQL服务并登录"><a href="#3-启动MySQL服务并登录" class="headerlink" title="3.启动MySQL服务并登录"></a>3.启动MySQL服务并登录</h2><p>1.启动mysql的服务<br><code>&gt; systemctl start mysqld</code></p><p>2.将mysql加到系统服务中并设置开机启动</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">``&gt; systemctl enable mysqld`</span><br><span class="line">`</span><br></pre></td></tr></table></figure><p>3.命令查看 mysql 服务状态失败<br><code>&gt; systemctl status mysqld.service</code></p><p>4.通过命令查看初始化密码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; grep &#x27;temporary password&#x27; /var/log/mysqld.log</span><br><span class="line">2022-08-19T21:19:22.632137Z 6 [Note] [MY-010454] [Server] A temporary password is generated for root@localhost: ~~~~~~~~~~~~</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>5.登录mysql</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt; mysql -uroot -p~~~~~~~~~~~~</span><br><span class="line"></span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 18</span><br><span class="line">Server version: 8.0.27</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2021, Oracle and/or its affiliates.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.</span><br></pre></td></tr></table></figure><p>6.更改密码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;你的密码(三种字符八位以上)&#x27;;</span><br><span class="line"></span><br><span class="line">提示：“您的密码不符合当前的策略要求”</span><br><span class="line">根据初始密码的设置规律设置密码再次尝试 满足密码要求</span><br><span class="line">&gt; mysql&gt; ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;@ROOT979&#x27;;</span><br><span class="line">ERROR 1819 (HY000): Your password does not satisfy the current policy requirements</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; mysql&gt; ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;~~~~~~Ke~~~~.~~&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br></pre></td></tr></table></figure><p>7.修改远程登录(连接MySQL&#x2F;Navicat）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt; mysql&gt; select user,authentication_string,host from user;</span><br><span class="line"></span><br><span class="line">+------------------+------------------------------------------------------------------------+-----------+</span><br><span class="line">| user             | authentication_string                                                  | host      |</span><br><span class="line">+------------------+------------------------------------------------------------------------+-----------+</span><br><span class="line">| mysql.infoschema | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHMUSTNRBRBEUSED | localhost</span><br><span class="line">| mysql.session    |~~ $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMEBEUSED~~ | localhost |</span><br><span class="line">| mysql.sys        | ~~$A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMERBEUSED~~ | localhost |</span><br><span class="line">| root             | $A$005$=^&quot;^Zp0kaEh&quot;</span><br><span class="line">                                         ~~5+KRBRkY6p.ghx6jv2shcU.sDF2zfg5YjlBcl2~~ | localhost |</span><br><span class="line">+------------------+------------------------------------------------------------------------+-----------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; mysql&gt; update user set host=&quot;%&quot; where user=&quot;root&quot;;</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt; mysql&gt; select user,authentication_string,host from user;</span><br><span class="line"></span><br><span class="line">+------------------+------------------------------------------------------------------------+-----------+</span><br><span class="line">| user             | authentication_string                                                  | host      |</span><br><span class="line">+------------------+------------------------------------------------------------------------+-----------+</span><br><span class="line">| root             | $~~A$005$=^&quot;^Zp0k!aEh&quot;</span><br><span class="line">                                         *5+~~KRBRkY6p.Pghx6bljvcA0U.sDF2zfFuVg5Yj~~lBcl*2 ~~| %         |</span><br><span class="line">| mysql.infoschema | $A~~$005$THISISACOMBINATINOFVALIDSALTAASSWORDTHATMUSTNEVERBRB~~EUSED | localhost |</span><br><span class="line">| mysql.session    | $A$005$~~THISISACOMBIATIONOFINVALIDSALTANDPASRDTHATMUSTNEVERBRBEUSE~~D | localhost |</span><br><span class="line">| mysql.sys        | $~~A$005$THISISACOMBINTIOOFINVALDSALTANDPASWORDTHATMUSTNEVERBRBEUSE~~D | localhost |</span><br><span class="line">+------------------+------------------------------------------------------------------------+-----------+</span><br><span class="line">4 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; mysql&gt; FLUSH PRIVILEGES;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; mysql&gt; exit;</span><br><span class="line">Bye</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>8.开放Linux的对外访问的端口3306</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#开放的端口永久保存到防火墙</span><br><span class="line">&gt; firewall-cmd --zone=public --add-port=3306/tcp --permanent</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#重启防火墙</span><br><span class="line">&gt; systemctl restart firewalld</span><br></pre></td></tr></table></figure><p>9.连接客户端连接MySQL&#x2F;Navicat</p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
